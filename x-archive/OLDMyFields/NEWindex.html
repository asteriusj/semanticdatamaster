<!--https://github.com/bopoda/ace/blob/master/form-elements.html-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta charset="utf-8" />
		<title>My JSON Form Field</title>

		<meta name="description" content="form field elements and layouts" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

		<!-- bootstrap & fontawesome -->
		<link rel="stylesheet" href="ace/assets/css/bootstrap.min.css" />
		<link rel="stylesheet" href="ace/assets/font-awesome/4.5.0/css/font-awesome.min.css" />
        
		<!-- page specific plugin styles -->
		<link rel="stylesheet" href="ace/assets/css/jquery-ui.custom.min.css" />
		<link rel="stylesheet" href="ace/assets/css/chosen.min.css" />
		<link rel="stylesheet" href="ace/assets/css/bootstrap-datepicker3.min.css" />
		<link rel="stylesheet" href="ace/assets/css/bootstrap-timepicker.min.css" />
		<link rel="stylesheet" href="ace/assets/css/daterangepicker.min.css" />
		<link rel="stylesheet" href="ace/assets/css/bootstrap-datetimepicker.min.css" />
		<link rel="stylesheet" href="ace/assets/css/bootstrap-colorpicker.min.css" />

		<!-- text fonts -->
		<link rel="stylesheet" href="ace/assets/css/fonts.googleapis.com.css" />

		<!-- ace styles -->
		<link rel="stylesheet" href="ace/assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />

		<!--[if lte IE 9]>
			<link rel="stylesheet" href="assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
		<![endif]-->
		<link rel="stylesheet" href="ace/assets/css/ace-skins.min.css" />
		<link rel="stylesheet" href="ace/assets/css/ace-rtl.min.css" />

		<!--[if lte IE 9]>
		  <link rel="stylesheet" href="ace/assets/css/ace-ie.min.css" />
		<![endif]-->

		<!-- inline styles related to this page -->

		<!-- ace settings handler -->
		<script src="ace/assets/js/ace-extra.min.js"></script>

		<!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

		<!--[if lte IE 8]>
		<script src="assets/js/html5shiv.min.js"></script>
		<script src="assets/js/respond.min.js"></script>
		<![endif]-->

        <!-- Handlebars -->
        <!--<script type="text/javascript" src="http://www.alpacajs.org/lib/handlebars/handlebars.min.js"></script>-->

        <!-- Alpaca -->
        <!--<link href="http://www.alpacajs.org/lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet" media="screen">-->
        <!--<link type="text/css" href="http://www.alpacajs.org/lib/bootstrap/dist/css/bootstrap-theme.css" rel="stylesheet" />-->

        <!--<script type="text/javascript" src="http://www.alpacajs.org/lib/alpaca/bootstrap/alpaca.js"></script>-->
        <!--<link type="text/css" href="http://www.alpacajs.org/lib/alpaca/bootstrap/alpaca.css" rel="stylesheet" />-->

    
    
    <link rel="stylesheet" style="text/css" href="../deps/opt/bootstrap.css" />
    
    <link rel="stylesheet" style="text/css" href="../styles/styles.css" />
    
    <style>
        .myheader {
            position: absolute;
            top: 20px;
            left: 20px;
        }
        .button-wrapper {
            position: absolute;
            top: 20px;
            left: 400px;
    
        }
        .myjson {
            position: absolute;
            top: 120px;
            left: 20px;
        }
        #editor {
            width: 260px;
            height: 240px;
        }
        
        .modal-wrapper {
            position: absolute;
            top: 120px;
            left: 320px;
    
        }
        .modal-dialog {
            width: 440px;
            height: 480px;
            margin: 2px;
        }
        .myform {
            position: absolute;
            top: 500px;
            left: 20px;
        }
        #res {
            width: 500px;
            height: 300px;
        }
    </style>
    
    <script>
        // create schema global variables from files
        // set myOWL via getOWLData in common
        // set myFieldEditSchema via getFieldEditData in cpmmon
        // set myJSONFormSchema via getJSONFormSchemaData in common
        //
        // create field selection list from myFieldEditSchema
        // when field in select list is changed, get field specific schema
        //
        // create myFieldJSON via getFieldJSON() and myFieldEditSchema
        // create Field Schema ACE editor via setJSONSchemaEditor() and myFieldJSON
        // update myFieldJSON via updateFieldJSON() with change to Field Editor
        // update myJSONFormSchema with updateJSONFormSchema() and myJSONFormSchema
        //
        // create myEditProperties via getEditProperties() and myFieldJSON
        // create Field Editor via setModalFieldEditor() and myEditProperties
        // update myEditProperties via updateEditProperties() with changes to Field Schema
        // update myFieldEditSchema with updateFieldEditSchema() and myEditProperties
        
        
    </script>
    <script>
        function setOwl(_myowl) {
            console.log('setOwl',_myowl)
            let myOWL = _myowl;
            return true;
        }
        function getOWL() {
            console.log('getOWL',myOWL)
            return myOWL;
        }
    </script>
    <script>
        function setFieldEditSchema(_myfieldeditschema) {
            console.log('setFieldEditSchema',_myfieldeditschema)
            let myFieldEditSchema = _myfieldeditschema;
            
            return true;
        } // end setFieldEditSchema
        
        function getFieldEditSchema() {
            console.log('getFieldEditSchema')
            let _myfieldeditschema = myFieldEditSchema ;

            return _myfieldeditschema;
        } //end getFieldEditSchema
        
        // update myFieldEditSchema with updateFieldEditSchema() 
        // and myEditProperties via getEditProperties(_myFieldJSON)
        function updateFieldEditSchema(fieldeditschema, editproperties) {
            console.log('updateFieldEditSchema',fieldeditschema, editproperties)
            let _fieldeditschema = null 
            
            if (fieldeditschema != null) {
                _fieldeditschema = fieldeditschema ;
                
            } else if (editproperties != null) {
                let _myEditProperties = getEditProperties(_fieldjson) ;
                let _myType = _myEditProperties.type ;
                
                
                
            } else {
                _fieldeditschema = getFieldEditSchema() ;
            }
            
            return _fieldeditschema
        } // end updateFieldEditSchema
            
    </script>
    <script>
        function setEditProperties(_myEditProperties) {
            console.log('_myEditProperties',_myEditProperties)
            let myEditProperties = _myEditProperties;
            return true ;
        }
        
        // create myEditProperties via getEditProperties(myFieldJSON) 
        function getEditProperties(_myFieldJSON) {
            console.log('getEditProperties',_myFieldJSON)
            
             var _ke = Object.keys(_fieldjson)[0] ;
            let _fieldname = _ke ;
            var _el = _fieldjson[_ke] ;
            let _fieldtype = _el.type ;
            
            
            _myFieldEditSchema = myFieldEditSchema
            console.log('_myFieldEditSchema',_myFieldEditSchema)
            let _fieldeditjson = {}
            _fieldeditjson = getFieldEditSchema()
            console.log('_fieldeditjson',_fieldeditjson)
      
            let _specifictype = {}
            _specifictype = _fieldeditjson.schema[_fieldtype] 
            console.log('_specifictype',_specifictype)
           
            let _props = {}
            _props = _specifictype.properties
            console.log('_props',JSON.stringify(_props))
            let _type =  _specifictype.type ;
    
            let _id = _specifictype.id ;
            let _title = _specifictype.title ;
            let _description = _specifictype.description ;
            //   console.log('_type, _title, _description', _type, _title, _description)
         
            _props.name.default = _fieldname;
            for (f in _fieldjson[_fieldname]) {
                // console.log('_fieldjson[_fieldname][f] f',_fieldjson[_fieldname][f], f)
                for (p in _props) {
                    // console.log('_props p',p)
                    if ( f === p ) {
                        console.log('f p ',f,p) 
                        _props[p].default = _fieldjson[_fieldname][f] ;
                        console.log(' f', f)
                        console.log('  ', _fieldjson[_fieldname][f])
                        console.log(' p', p)
                        console.log('  ', _props[p].default) 
                    } // end if
                } // end for p
            } // end for f
           
            _props.required.default = _fieldjson.required;
            _props.title.default = _fieldjson.title;
            _props.default.default = _fieldjson.value;
            console.log('_props ',_props)
            
            _specifictype.properties = _props
            _fieldeditjson.schema[_fieldtype] = _specifictype
            
            cpnsole.log('_props',_props)
            return (_props)
        }
        function updateEditProperties(_myEditProperties) {
            console.log('updateEditProperties',_myEditProperties)
            
            
        }
    </script>
    <script>
        // create myJSONFormSchema
        function setJSONFormSchema(_myschema, cb) {
            console.log('setJSONFormSchema',_myschema)
            let myJSONFormSchema = _myschema;
            
            if (cb) cb (true) ;
            return true ;
        }
        
        // get myJSONFormSchema from set value 
        function getJSONFormSchema(cb) {
            console.log('getJSONFormSchema')
            let _jsonformschema = myJSONFormSchema ;
            
            if (cb) cb (_jsonformschema) ;
            return _jsonformschema;
        }
        
        // from changes ro myFieldJSON or to ...
        function updateJSONFormSchema(jsonformschema, fieldjson, cb) {
            console.log('updateJSONFormSchema',jsonformschema,fieldjson)
            let _jsonformschema = null 
            
            _jsonformschema = jsonformschema ;
            
            setJSONFormSchema(_jsonformschema) ;
            
            if (cb) cb (_jsonformschema) ;
            return _jsonformschema;
        }
    </script>
    <script>
    // https://developers.google.com/web/fundamentals/primers/promises
        // var promise = new Promise( function(resolve, reject) {
        //   // do a thing, possibly async, then…
        
        //   if (1 === 1) {
        //     resolve("Stuff worked!");
        //   }
        //   else {
        //     reject(Error("It broke"));
        //   }
        // });
        // function get(url) {
        //   // Return a new promise.
        //   return new Promise(function(resolve, reject) {
        //     // Do the usual XHR stuff
            
        
        //   });
        // }

        // create myFieldJSON
        function setFieldJSON(_fieldjson) {
            console.log('setFieldJSON',_fieldjson)
            
            return new Promise(function(resolve, reject) {

                try {
                    
                    let myFieldJSON = {} ;
                    myFieldJSON = _fieldjson 
                    resolve();
                    
                } catch(e) {
                    console.error('e',e)
                    reject();
                } 
                       
        
            })
 
        } // end setFieldJSON
        
        // get myFieldJSON from myJSONFormSchema and fieldtype
        // or from set value of fieldtype is null
        function getFieldJSON(fieldtype, cb) {
            console.log('getFieldJSON',fieldtype)
            let _fieldjson = null ;
            
            if (fieldtype != null) {
                _fieldjson = myJSONFormSchema[fieldtype] 
                 
            } else {
                _fieldjson = myFieldJSON
            }
            
            if (cb) cb (_fieldjson) ;
            return _fieldjson
        } // end getFieldJSON
        
        // create myFieldJSON via getFieldJSON() and myFieldEditSchema and selelcetd field
        // from changes to Field Schama or Field Editor
        function updateFieldJSON(fieldjson,fieldtype,cb) {
            console.log('updateFieldJSON',fieldjson,fieldtype)
            let _fieldjson = null ;
            
            if (fieldjson != null) {
                _fieldjson = fieldjson ;
                
            } else if (fieldtype != null) {
                _fieldjson = getFieldJSON(fieldtype) ;
                
            } else {
                _fieldjson = myFieldJSON ;
            }
            
            setFieldJSON(_fieldjson) ;
            updateFieldEditSchema(_fieldjson) ;
            updateFieldEditor(_fieldjson) ;
            
            if (cb) cb (_fieldjson) ;
            return _fieldjson ;
        }
    </script>

  
    <!--<script type="application/json" src="json/defaultschema.json"></script>-->
    <script type="application/ttl" src="../owl/defaultontology.ttl"></script>

 
    <script type="text/javascript" src="../deps/jquery.min.js"></script>
    <script type="text/javascript" src="../deps/underscore.js"></script>
    <script type="text/javascript" src="../deps/opt/jsv.js"></script>
    <script type="text/javascript" src="../lib/jsonform.js"></script>

    <script type="text/javascript" src="../js/common.js"></script>
    
  </head>
  <body  onload="getDataFiles()">
    
   
hiya

    
  </body>
</html>